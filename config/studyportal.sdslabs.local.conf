<VirtualHost *:80>
    # ProxyPreserveHost On

    # Servers to proxy the connection, or;
    # List of application servers:
    # Usage:
    # ProxyPass / http://[IP Addr.]:[port]/
    # ProxyPassReverse / http://[IP Addr.]:[port]/
    # Example:
    ProxyPass / http://127.0.0.1:3005/
    ProxyPassReverse / http://127.0.0.1:3005/

    ServerName studyportal.sdslabs.local
    DocumentRoot /home/d3mon/Projects/studyportal-axion/src
    <Directory /home/d3mon/Projects/studyportal-axion/src>
      Options -Indexes -MultiViews
      Allowoverride all
      Require all granted

      RewriteEngine On
      RewriteCond %{REQUEST_FILENAME} -f [OR]
      RewriteCond %{REQUEST_FILENAME} -d
        RewriteRule ^(.*)$ - [QSA,L]
      RewriteRule ^api/(.*)$ http://localhost:8005/api/$1 [END]
      RewriteRule ^(.*)$ http://localhost:3005/$1 [P]

    </Directory>
    ErrorLog ${APACHE_LOG_DIR}/studyportal.error.log
    LogLevel warn
    CustomLog ${APACHE_LOG_DIR}/studyportal.access.log combined
	</Directory>
</VirtualHost>
